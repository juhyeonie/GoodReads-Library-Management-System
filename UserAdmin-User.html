<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GoodReads | User Management</title>
  <link rel="stylesheet" href="UserAdmin-User.css">
  <style>
  /* ===== Reset & Base ===== */
  * { box-sizing: border-box; margin:0; padding:0; }
  html,body { height:100%; }
  body {
    font-family: "Gordita", Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background: #f0f2f4;
    color:#222;
  }

  /* ===== App layout ===== */
  .app { display:flex; min-height:100vh; width:100%; }

  /* Sidebar */
  .sidebar {
    width: 300px;
    min-width: 220px;
    max-width: 320px;
    background: linear-gradient(180deg,#1b3c53 0%, #6f6b9b 100%);
    color: #fff;
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    padding: 28px 18px;
    position: fixed; top:0; left:0; bottom:0;
    transition: transform .28s ease, width .28s ease, padding .2s ease;
    z-index: 1200;
    box-shadow: 0 2px 6px rgba(16,24,32,.08);
  }
  .sidebar.hidden { transform: translateX(-110%); }
  .sidebar.collapsed-desktop { width:80px; padding-left:12px; padding-right:12px; }

  /* Collapse btn */
  .collapse-btn {
    display:inline-block; margin:8px 0 12px; background: rgba(255,255,255,0.06);
    color:#fff; border:none; padding:6px 8px; border-radius:6px; cursor:pointer; font-weight:700;
  }
  @media (max-width:800px){ .collapse-btn { display:none; } }

  .logo-img { width: 190px; display:block; margin: 0 auto 6px; transition: width .2s ease; }
  .menu { margin-top: 12px; display:flex; flex-direction:column; gap:8px; }

  .menu-item {
    display:flex; align-items:center; gap:12px; padding:12px 14px; border-radius:8px;
    text-decoration:none; color:#fff; font-weight:600; transition: padding .2s ease, justify-content .2s ease;
  }
  .menu-item .icon { width:36px; display:flex; align-items:center; justify-content:center; }
  .menu-item .icon img { width:22px; height:22px; object-fit:contain; }
  .menu-item.active, .menu-item:hover { background: rgba(255,255,255,0.08); }

  /* When collapsed on desktop hide text and center icons */
  .sidebar.collapsed-desktop .menu-item { justify-content:center; padding-left:8px; padding-right:8px; }
  .sidebar.collapsed-desktop .menu-item .text { display:none; }
  .sidebar.collapsed-desktop .logo-img { width:180px; margin:4px auto; }

  /* Sidebar bottom */
  .sidebar .user { display:flex; justify-content:space-between; align-items:center; font-size:14px; margin-top:12px; }
  .logout-icon img { width:28px; height:28px; }

  /* ===== Main content ===== */
  .main-content {
    margin-left:300px;
    padding:28px 34px;
    width: calc(100% - 300px);
    transition: margin-left .28s ease, width .28s ease;
    min-height:100vh;
  }
  .main-content.collapsed-desktop { margin-left:80px; width: calc(100% - 80px); }
  .main-content.full { margin-left:0; width:100%; }

  /* Mobile menu toggle */
  .menu-toggle {
    display:none; position:fixed; left:16px; top:14px; z-index:1300;
    background:#1b3c53; color:#fff; border:none; padding:8px 10px; border-radius:6px;
    font-weight:700; cursor:pointer;
  }

  /* ===== Top area (search) ===== */
  .top-bar { display:flex; justify-content:space-between; align-items:center; margin-bottom:18px; gap:12px; flex-wrap:wrap; }
  .top-bar h1 { color:#1b3c53; font-size:28px; margin-bottom: 20px;}

  .search-panel {
    display:flex; gap:8px; align-items:center;
  }
  .search-input {
    display:flex; align-items:center; background:white; border:1px solid #1b3c53; border-radius:8px; padding:4px 8px; height:36px;
    width:460px; max-width:60vw; box-shadow:0 1px 3px rgba(0,0,0,.06);
  }
  .search-input input { border:0; outline:none; padding:6px 8px; font-size:14px; width:100%; }
  .search-input button { background:transparent; border:0; cursor:pointer; padding:6px; font-size:14px; }

  .filter-select { padding:6px 10px; border-radius:8px; border:1px solid #cbd6df; }

  /* ===== Table section (style to match screenshots) ===== */
  .table-section {
    background:#fff; border-radius:8px; padding:12px; border:1px solid rgba(0,0,0,.06);
    overflow:auto;
    box-shadow: 0 6px 18px rgba(16,24,40,0.03);
  }
  .table-top { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; gap:8px; }
  .table-top h2 { color:#1b3c53; font-size:18px; margin-left:6px; }

  .table-wrap { overflow:auto; }
  table { width:100%; border-collapse:collapse; min-width:820px; }
  thead th {
    background:#1b3c53; color:#fff; font-weight:700; text-align:left; padding:12px 10px;
    border:1px solid rgba(0,0,0,0.12);
  }
  tbody td {
    padding:12px 10px; border:1px solid rgba(0,0,0,0.16); vertical-align:middle; background:#fff;
  }
  tbody tr td:first-child { width:120px; }
  .actions { display:flex; gap:8px; justify-content:flex-end; }

  .pill {
    border:none; border-radius:8px; padding:6px 12px; cursor:pointer; background:#456882; color:#fff; font-weight:700; font-size:13px;
    box-shadow: inset 0 -2px 0 rgba(0,0,0,0.08);
  }
  .pill.delete { background:#2f4f5d; }

  .add-user {
     padding:8px 14px; border-radius:8px; background:#123b4f; color:#fff; border:none; cursor:pointer; font-weight:700;
    float: right;
     margin-top:12px;
  }

  /* ===== Modal overlay / box (matching gradient top & bottom) ===== */
  .modal-overlay {
    position: fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(10,14,18,0.48); z-index:2200; padding:28px;
  }
  .modal-overlay[aria-hidden="false"] { display:flex; }

  .modal-box {
    width:600px; max-width:calc(100% - 48px); background:#fff; border-radius:6px; overflow:hidden;
    box-shadow: 0 18px 42px rgba(16,24,40,0.3); display:flex; flex-direction:column; position:relative;
    animation: fadeIn .18s ease;
  }
  .modal-topbar { height:48px; background: linear-gradient(90deg,#1b3c53 0%, #908daf 100%); }
  .modal-body { padding:34px 40px 22px 40px; }
  .modal-title { color:#456882; font-size:20px; margin-bottom:24px; font-weight:700; }

  /* fields look like Admin screenshot (rounded, subtle border) */
  .user-form .field { margin-bottom:14px; }
  .user-form input[type="text"], .user-form input[type="email"], .user-form input[type="password"], .user-form select {
    width:100%; padding:10px 12px; border-radius:8px; border:1px solid #c7ced2; font-size:14px; color:#556;
    background:#fff; outline:none;
  }

  /* validation invalid state */
  .user-form input:invalid, .user-form select:invalid, .user-form input[data-invalid="true"], .user-form select[data-invalid="true"] {
    border-color: #1b3c53;
    box-shadow: 0 0 0 3px rgba(217,83,79,0.06);
  }

  .modal-bottombar {
    height:62px; background: linear-gradient(90deg,#1b3c53 0%, #908daf 100%); display:flex; align-items:center; justify-content:flex-end; padding:0 18px;
  }
  .modal-actions { display:flex; gap:10px; }
  .btn { border:none; padding:8px 12px; border-radius:6px; font-weight:700; cursor:pointer; font-size:13px; }
  .btn.confirm { background:#fff; color:#1b3c53; }
  .btn.cancel { background: rgba(255,255,255,0.14); color:#fff; }

  /* ===== Delete confirm small modal ===== */
  .confirm-box { width:420px; max-width:calc(100% - 48px); padding:18px; border-radius:8px; background:#fff; box-shadow:0 12px 32px rgba(0,0,0,0.12);
    text-align:left;
  }
  .confirm-actions { display:flex; gap:10px; justify-content:flex-end; margin-top:12px; }

  /* Accessibility helper */
  .sr-only { position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden; }

  /* Animations */
  @keyframes fadeIn { from { opacity:0; transform:translateY(-6px); } to { opacity:1; transform:none; } }

  /* ===== Responsive ===== */
  @media (max-width:1100px) {
    .sidebar { width:260px; }
    .main-content { margin-left:260px; width:calc(100% - 260px); padding:20px; }
  }
  @media (max-width:800px) {
    .menu-toggle { display:block; }
    .sidebar { transform:translateX(-110%); position:fixed; }
    .sidebar.expanded { transform:translateX(0); }
    .main-content { margin-left:0; width:100%; padding:16px; }
    table { min-width:600px; }
    .search-input { width:260px; }
  }
  @media (max-width:420px) {
    table { min-width:520px; }
    .modal-box { width:100%; }
  }
  </style>
</head>
<body>

  <!-- Mobile menu toggle -->
  <button id="menuToggle" class="menu-toggle" aria-controls="sidebar" aria-expanded="false">☰</button>

  <div class="app">
    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar" role="navigation" aria-label="Main sidebar">
      <div class="sidebar-top">
        <div class="logo">
          <img src="logo.png" alt="GoodReads Logo" class="logo-img" />
        </div>

        <!-- Desktop collapse button -->
        <button id="collapseBtn" class="collapse-btn" aria-pressed="false" title="Collapse sidebar">⇤</button>

        <nav class="menu" aria-label="Primary navigation">
          <a href="UserAdmin-Dashboard.html" class="menu-item">
            <span class="icon"><img src="dashboard.png" alt="" /></span>
            <span class="text">Dashboard</span>
          </a>
          <a href="UserAdmin-User.html" class="menu-item active">
            <span class="icon"><img src="user.png" alt="" /></span>
            <span class="text">User Management</span>
          </a>
          <a href="UserAdmin-Admin.html" class="menu-item">
            <span class="icon"><img src="user.png" alt="" /></span>
            <span class="text">Admin Management</span>
          </a>
        </nav>
      </div>

      <div class="sidebar-bottom">
        <div class="user">
          <p class="username">User Admin1</p>
          <a href="StartPage.html" class="logout-icon" title="Logout"><img src="logout.png" alt="Logout" /></a>
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <main id="mainContent" class="main-content" role="main">
      <div class="top-bar">
        <h1>User Management</h1>

        <div class="search-panel">
          <div class="search-input" role="search">
            <input id="searchInput" type="search" placeholder="Search receipt / email..." aria-label="Search users">
            <button id="searchBtn" aria-label="Search">🔍</button>
          </div>
          <select id="filterSelect" class="filter-select" aria-label="Filter users">
            <option value="all">All</option>
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
          </select>
        </div>
      </div>

      <section class="table-section" aria-labelledby="newusers-heading">
        <div class="table-top">
          <h2 id="newusers-heading">New users</h2>
          <div><!-- placeholder to align --></div>
        </div>

        <div class="table-wrap">
          <table id="usersTable" aria-describedby="newusers-heading">
            <thead>
              <tr>
                <th>Receipt no</th>
                <th>Email</th>
                <th>Password</th>
                <th style="text-align:right">Actions button</th>
              </tr>
            </thead>
            <tbody>
              <!-- injected by JS -->
            </tbody>
          </table>
        </div>

        <button id="addUserBtn" class="add-user" type="button">Add new user</button>
      </section>
    </main>
  </div>

  <!-- ===== Edit User Modal ===== -->
  <div id="editModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="editTitle">
    <div class="modal-box" role="document">
      <div class="modal-topbar"></div>
      <div class="modal-body">
        <h2 id="editTitle" class="modal-title">Edit user details</h2>
        <form id="editForm" class="modal-form user-form" autocomplete="off">
          <div class="field">
            <input id="editEmail" name="email" type="email" placeholder="Email" required>
          </div>
          <div class="field">
            <input id="editPassword" name="password" type="password" placeholder="Password" required>
          </div>
          <input type="hidden" id="editReceipt" name="receipt">
        </form>
      </div>
      <div class="modal-bottombar">
        <div class="modal-actions">
          <button id="confirmEdit" class="btn confirm">CONFIRM</button>
          <button id="cancelEdit" class="btn cancel" type="button">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== Add User Modal (new) ===== -->
  <div id="addModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="addTitle">
    <div class="modal-box" role="document">
      <div class="modal-topbar"></div>
      <div class="modal-body">
        <h2 id="addTitle" class="modal-title">Add a new user</h2>
        <form id="addForm" class="modal-form user-form" autocomplete="off" novalidate>
          <div class="field">
            <input id="addEmail" name="email" type="email" placeholder="Email" required>
          </div>
          <div class="field">
            <input id="addPassword" name="password" type="password" placeholder="Password" required>
          </div>
          <input type="hidden" id="addReceipt" name="receipt">
        </form>
      </div>
      <div class="modal-bottombar">
        <div class="modal-actions">
          <button id="confirmAdd" class="btn confirm" type="button">CONFIRM</button>
          <button id="cancelAdd" class="btn cancel" type="button">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== Delete Confirm Modal ===== -->
  <div id="deleteModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="deleteTitle">
    <div class="confirm-box" role="document" aria-live="assertive">
      <div>
        <h3 id="deleteTitle" style="color:#1b3c53; margin-bottom:8px;">Confirm deletion</h3>
        <p id="deleteMessage">Are you sure you want to delete this user?</p>
        <div class="confirm-actions">
          <button id="confirmDeleteBtn" class="btn confirm">YES, DELETE</button>
          <button id="cancelDeleteBtn" class="btn cancel">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <script src="UserAdmin-User.js"></script>
</body>
</html>
